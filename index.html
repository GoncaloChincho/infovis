<!doctype html>
<html lang="en">
   <head>
      <title>NEO Explorer</title>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <link rel="stylesheet" href="content/css/custom.css">
      <script src="content/js/d3.min.js"></script>
      <script src="content/js/jquery-3.2.1.slim.min.js"></script>
   </head>
   <body>
      <div id="mySidenav" class="sidenav">
         <span class="sideNavTitle">Filters</span>
         <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
         <a href="#collapseDiameter" aria-expanded="false" aria-controls="collapseDiameter" data-toggle="collapse">Diameter</a>
         <div class="collapse" id="collapseDiameter">
            <button class="nice-button" type="button">15 Biggest</button>
            <button class="nice-button" type="button">15 Smallest</button>
         </div>
         <a href="#collapseVelocity" aria-expanded="false" aria-controls="collapseVelocity" data-toggle="collapse">Velocity</a>
         <div class="collapse" id="collapseVelocity">
            <button class="nice-button" type="button">15 Fastest</button>
            <button class="nice-button" type="button">15 Slowest</button>
         </div>
         <a href="#collapseHazard" aria-expanded="false" aria-controls="collapseHazard" data-toggle="collapse">Hazard</a>
         <div class="collapse" id="collapseHazard">
            <button class="nice-button" type="button">15 Most Hazardous</button>
            <button class="nice-button" type="button">15 Least Hazardous</button>
         </div>
         <a href="#collapseDistance" aria-expanded="false" aria-controls="collapseDistance" data-toggle="collapse">Distance</a>
         <div class="collapse" id="collapseDistance">
            <button class="nice-button" type="button">15 Closest</button>
            <button class="nice-button" type="button">15 Farthest</button>
         </div>
         <a href="#collapseDamage" aria-expanded="false" aria-controls="collapseDamage" data-toggle="collapse">Impact Damage</a>
         <div class="collapse" id="collapseDamage">
            <button class="nice-button" type="button">15 Most Damaging</button>
            <button class="nice-button" type="button">15 Least Damaging</button>
         </div>
      </div>
      <div id="main">
         <nav class="navbar" style="background-color: #e3f2fd;">
            <a onclick="openNav()" href="#"><span class=" navbar-brand glyphicon glyphicon-menu-hamburger"></span></a>
            <a class="navbar-brand" href="#">NEO Explorer</a>
            <!--<div class="collapse navbar-collapse" id="navbarSupportedContent">
               <form class="form-inline my-2 my-lg-0">
                   <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                   <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
               </form>
               <button class="btn btn-outline-success my-2 my-sm-0" data-toggle="modal" data-target="#filtersModal">Filters</button>
               </div>-->
         </nav>
         <div class="wholerea">
            <svg id="svgId" width="1000" height="500">
            </svg>
         </div>
      </div>
      <!--<div class="modal fade" id="filtersModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog" role="document">
           <div class="modal-content">
         	<div class="modal-header">
         	  <h5 class="modal-title" id="exampleModalLabel">Filters</h5>
         	  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
         		<span aria-hidden="true">&times;</span>
         	  </button>
         	</div>
         	<div class="modal-body">
         	  ...
         	</div>
         	<div class="modal-footer">
         	  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         	  <button type="button" class="btn btn-primary">Save changes</button>
         	</div>
           </div>
         </div>
          </div>	-->
      <script src="components/orbitalLayout.js"></script>
      <script src="components/radarChart.js"></script>
      <script>
         const DISTANCE_MAX = 77.82;
         const DISTANCE_MIN = 0.04;
         const DIAMETER_MAX = 495;
         const DIAMETER_MIN = 1.65;
         const VELOCITY_MAX = 38.6;
         const VELOCITY_MIN = 1;
         const IMPACT_PROBABILITY_MAX = 0.96;
         const IMPACT_PROBABILITY_MIN = 1.2e-9;
         const HAZARD_SCALE_MAX = -1.4;
         const HAZARD_SCALE_MIN = -11.4;
         let AVERAGE_NEO = null;
         let DATA = null;
         const svg = d3.select("#svgId");
         d3.json("content/data/example.json", function(error, graph) {
         	if (error) throw error;
         	DATA = graph;
         	let distanceSum = 0;
         	let diameterSum = 0;
         	let velocitySum = 0;
         	let impactProbabilitySum = 0;
         	let hazardScaleSum = 0;
         
         	for( var i = 0; i < graph.length; i++ ){
         		distanceSum += graph[i].distance;
         		diameterSum += graph[i].diameter;
         		velocitySum += graph[i].velocity;
         		impactProbabilitySum += graph[i].impactProbability;
         		hazardScaleSum += graph[i].hazardScale;
         	}
         	AVERAGE_NEO = {
         		name: 'Average NEO',
         		distance: distanceSum/graph.length,
         		diameter: diameterSum/graph.length,
         		velocity: velocitySum/graph.length,
         		impactProbability: impactProbabilitySum/graph.length,
         		hazardScale: hazardScaleSum/graph.length,
         	}
         	initOrbitalLayout();
         	initRadarChart();
         });	
      </script>
      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="content/js/filters.js"></script>
      
      <script src="content/js/popper.min.js"></script>
      <script src="content/js/bootstrap.min.js"></script>
   </body>
</html>